<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Mysql 版本 目前都是使用的8.0，了解一下8.0对于之前的旧版本的新特性 8.0版本默认字符集将由 latin1 改为 utf8mb4 参考链接：The MySQL 8.0.0 Milestone Release is available 储存引擎 MySQL 5.5 版本之后开始采用 InnoDB 为默认存储引擎，之前版本默认的存储引擎为 MyISAM 存储引擎操作的对象是表，存储引擎的功能是接收上层传下来的指令，然后对表中的数据进行读取或写入的操作 区别： InnoDB 支持事务，MyISAM 不支持（InnoDB每个语句就是一个事务） InnoDB支持表级锁、行级锁，默认为行级锁；而 MyISAM 仅支持表级 InnoDB 必须要有主键，MyISAM可以没有主键（InnoDB不建索引的话会隐藏的生成一个 6 byte 的 int 型的索引作为主键索引。） InnoDB是聚集索引，MyISAM是非聚集索引（索引和数据文件是分离）（聚集索引查询数据速度快，使用较少的内存） 查询语句生命周期 1.sql通过网络通信协议，从客户端发磅到服务端。 2.服务端收到sql后，查询缓存是否有匹配结果，若存在缓存，则直接取出缓存中结果返回， 否则进行下一阶段。 3.服务端对sql进行解析、预处理，然后生成查询计划。 4.执行引擎根据优化器生成的查询计划，调用存储引擎的API接口，拿到查询结果，然后返回 给客户端，同是缓存查询结果，不过缓存查询结果需要手动配置才会生效。 常用的数据类型 提前了解字符集 Mysql常见字符集： utf8mb4 utf8字符集，使用1～4个字节表示字符。mb4就是most bytes 4的意思，专门用来兼容四字节的unicode，utf8mb4是utf8的超集,兼容性比价好，可能会耗费更多的存储空间 1 2 3 4 5 6 CREATE TABLE `user` ( `id` int unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;, `name` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;姓名&#39;, .">
<title>Mysql Psot</title>

<link rel='canonical' href='https://munihehacker/my-blog.github.io/p/mysql-psot/'>

<link rel="stylesheet" href="/my-blog.github.io/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Mysql Psot">
<meta property='og:description' content="Mysql 版本 目前都是使用的8.0，了解一下8.0对于之前的旧版本的新特性 8.0版本默认字符集将由 latin1 改为 utf8mb4 参考链接：The MySQL 8.0.0 Milestone Release is available 储存引擎 MySQL 5.5 版本之后开始采用 InnoDB 为默认存储引擎，之前版本默认的存储引擎为 MyISAM 存储引擎操作的对象是表，存储引擎的功能是接收上层传下来的指令，然后对表中的数据进行读取或写入的操作 区别： InnoDB 支持事务，MyISAM 不支持（InnoDB每个语句就是一个事务） InnoDB支持表级锁、行级锁，默认为行级锁；而 MyISAM 仅支持表级 InnoDB 必须要有主键，MyISAM可以没有主键（InnoDB不建索引的话会隐藏的生成一个 6 byte 的 int 型的索引作为主键索引。） InnoDB是聚集索引，MyISAM是非聚集索引（索引和数据文件是分离）（聚集索引查询数据速度快，使用较少的内存） 查询语句生命周期 1.sql通过网络通信协议，从客户端发磅到服务端。 2.服务端收到sql后，查询缓存是否有匹配结果，若存在缓存，则直接取出缓存中结果返回， 否则进行下一阶段。 3.服务端对sql进行解析、预处理，然后生成查询计划。 4.执行引擎根据优化器生成的查询计划，调用存储引擎的API接口，拿到查询结果，然后返回 给客户端，同是缓存查询结果，不过缓存查询结果需要手动配置才会生效。 常用的数据类型 提前了解字符集 Mysql常见字符集： utf8mb4 utf8字符集，使用1～4个字节表示字符。mb4就是most bytes 4的意思，专门用来兼容四字节的unicode，utf8mb4是utf8的超集,兼容性比价好，可能会耗费更多的存储空间 1 2 3 4 5 6 CREATE TABLE `user` ( `id` int unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;, `name` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;姓名&#39;, .">
<meta property='og:url' content='https://munihehacker/my-blog.github.io/p/mysql-psot/'>
<meta property='og:site_name' content='我的小站'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2023-02-24T10:23:44&#43;08:00'/><meta property='article:modified_time' content='2023-02-24T10:23:44&#43;08:00'/>
<meta name="twitter:title" content="Mysql Psot">
<meta name="twitter:description" content="Mysql 版本 目前都是使用的8.0，了解一下8.0对于之前的旧版本的新特性 8.0版本默认字符集将由 latin1 改为 utf8mb4 参考链接：The MySQL 8.0.0 Milestone Release is available 储存引擎 MySQL 5.5 版本之后开始采用 InnoDB 为默认存储引擎，之前版本默认的存储引擎为 MyISAM 存储引擎操作的对象是表，存储引擎的功能是接收上层传下来的指令，然后对表中的数据进行读取或写入的操作 区别： InnoDB 支持事务，MyISAM 不支持（InnoDB每个语句就是一个事务） InnoDB支持表级锁、行级锁，默认为行级锁；而 MyISAM 仅支持表级 InnoDB 必须要有主键，MyISAM可以没有主键（InnoDB不建索引的话会隐藏的生成一个 6 byte 的 int 型的索引作为主键索引。） InnoDB是聚集索引，MyISAM是非聚集索引（索引和数据文件是分离）（聚集索引查询数据速度快，使用较少的内存） 查询语句生命周期 1.sql通过网络通信协议，从客户端发磅到服务端。 2.服务端收到sql后，查询缓存是否有匹配结果，若存在缓存，则直接取出缓存中结果返回， 否则进行下一阶段。 3.服务端对sql进行解析、预处理，然后生成查询计划。 4.执行引擎根据优化器生成的查询计划，调用存储引擎的API接口，拿到查询结果，然后返回 给客户端，同是缓存查询结果，不过缓存查询结果需要手动配置才会生效。 常用的数据类型 提前了解字符集 Mysql常见字符集： utf8mb4 utf8字符集，使用1～4个字节表示字符。mb4就是most bytes 4的意思，专门用来兼容四字节的unicode，utf8mb4是utf8的超集,兼容性比价好，可能会耗费更多的存储空间 1 2 3 4 5 6 CREATE TABLE `user` ( `id` int unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键&#39;, `name` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT &#39;姓名&#39;, .">
    <link rel="shortcut icon" href="/favicon.ico" />

  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/my-blog.github.io/">
                
                    
                    
                    
                        
                        <img src="/my-blog.github.io/img/avatar_huf0f10adf0b1409009c769d5188d1956a_595492_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🍥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/my-blog.github.io">我的小站</a></h1>
            <h2 class="site-description">悟已往之不谏,知来者知可追</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1747041651549" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2804" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M729.329 373.95c-9.795-5.945-19.062-6.785-19.144-6.785l-1.065-0.05c-57.2-3.866-121.165-5.832-190.126-5.832l-13.988 0.005c-68.956 0-132.925 1.96-190.12 5.831l-1.066 0.052c-0.082 0-9.349 0.84-19.144 6.784-15.047 9.129-24.273 25.948-27.417 49.97-10.071 76.913-4.383 173.65 0.19 251.393 2.938 49.966 33.407 62.459 85.048 67.149 10.782 0.988 69.089 5.867 159.508 5.893v-0.005c90.42-0.02 148.726-4.905 159.514-5.888 51.64-4.69 82.11-17.183 85.043-67.15 4.577-77.741 10.26-174.479 0.19-251.391-3.15-24.028-12.376-40.848-27.423-49.977z m-390.99 172.718a23.65 23.65 0 0 1-31.687-10.845 23.68 23.68 0 0 1 10.844-31.687c2.038-1.004 50.693-24.725 110.541-43.065a23.68 23.68 0 1 1 13.88 45.292c-56.294 17.25-103.111 40.074-103.577 40.305z m268.898 35.886c-0.44 2.232-11.269 54.64-50.939 54.64-21.442 0-36.1-14.049-44.984-26.772-8.694 12.708-22.805 26.772-42.655 26.772-35.533 0-50.135-48.266-51.681-53.77a11.366 11.366 0 0 1 21.878-6.17c2.75 9.652 14.13 37.202 29.798 37.202 16.374 0 28.892-23.644 31.985-31.928a11.372 11.372 0 0 1 10.65-7.388h0.06a11.376 11.376 0 0 1 10.63 7.506c0.107 0.286 11.965 31.815 34.314 31.815 20.864 0 28.565-35.952 28.641-36.32a11.346 11.346 0 0 1 13.358-8.94 11.361 11.361 0 0 1 8.945 13.353z m110.116-46.736a23.68 23.68 0 0 1-31.683 10.844c-0.47-0.23-47.472-23.116-103.572-40.31a23.69 23.69 0 0 1-15.708-29.583 23.67 23.67 0 0 1 29.578-15.703c59.848 18.34 108.498 42.061 110.551 43.065a23.68 23.68 0 0 1 10.834 31.687z" p-id="2805"></path><path d="M849.92 51.2H174.08c-67.866 0-122.88 55.014-122.88 122.88v675.84c0 67.87 55.014 122.88 122.88 122.88h675.84c67.87 0 122.88-55.01 122.88-122.88V174.08c0-67.86-55.01-122.88-122.88-122.88z m-36.603 627.45c-2.626 44.58-21.821 78.634-55.516 98.49-25.682 15.134-54.175 19.486-81.137 21.938-32.455 2.95-92.718 6.098-164.664 6.119-71.941-0.02-132.209-3.164-164.664-6.119-26.962-2.452-55.455-6.804-81.132-21.939-33.695-19.855-52.89-53.903-55.51-98.483-4.706-80.133-10.574-179.855 0.194-262.108C221.542 335.165 280.99 311.572 311.5 310.38a2482.642 2482.642 0 0 1 81.423-4.086c-7.536-8.535-19.88-23.322-28.815-38.114-13.737-22.737 8.53-41.687 8.53-41.687s23.68-20.367 44.528 5.213c15.698 19.266 38.38 55.997 48.62 72.954l53.207-0.215c13.26 0 26.332 0.072 39.22 0.215 10.24-16.957 32.92-53.683 48.619-72.954 20.843-25.58 44.528-5.213 44.528-5.213s22.262 18.95 8.525 41.687c-8.934 14.792-21.279 29.579-28.815 38.114 28.36 0.978 55.562 2.34 81.423 4.08 30.515 1.198 89.958 24.791 100.613 106.174 10.778 82.248 4.915 181.97 0.21 262.103z" p-id="2806"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/alihehacker'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 640 640"><path d="M319.988 7.973C143.293 7.973 0 151.242 0 327.96c0 141.392 91.678 261.298 218.826 303.63 16.004 2.964 21.886-6.957 21.886-15.414 0-7.63-.319-32.835-.449-59.552-89.032 19.359-107.8-37.772-107.8-37.772-14.552-36.993-35.529-46.831-35.529-46.831-29.032-19.879 2.209-19.442 2.209-19.442 32.126 2.245 49.04 32.954 49.04 32.954 28.56 48.922 74.883 34.76 93.131 26.598 2.882-20.681 11.15-34.807 20.315-42.803-71.08-8.067-145.797-35.516-145.797-158.14 0-34.926 12.52-63.485 32.965-85.88-3.33-8.078-14.291-40.606 3.083-84.674 0 0 26.87-8.61 88.029 32.8 25.512-7.075 52.878-10.642 80.056-10.76 27.2.118 54.614 3.673 80.162 10.76 61.076-41.386 87.922-32.8 87.922-32.8 17.398 44.08 6.485 76.631 3.154 84.675 20.516 22.394 32.93 50.953 32.93 85.879 0 122.907-74.883 149.93-146.117 157.856 11.481 9.921 21.733 29.398 21.733 59.233 0 42.792-.366 77.28-.366 87.804 0 8.516 5.764 18.473 21.992 15.354 127.076-42.354 218.637-162.274 218.637-303.582 0-176.695-143.269-319.988-320-319.988l-.023.107z"/></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.zhihu.com/people/hacker-25-85-67'
                        target="_blank"
                        title="Zhihu"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1747041668264" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3961" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M656.90624 724.29056l47.42144-33.72544h52.68992V344.89856h-143.31904v346.7264h35.82976z" fill="#0066FF" p-id="3962"></path><path d="M849.92 51.2H174.08c-67.8656 0-122.88 55.0144-122.88 122.88v675.84c0 67.8656 55.0144 122.88 122.88 122.88h675.84c67.8656 0 122.88-55.0144 122.88-122.88V174.08c0-67.8656-55.0144-122.88-122.88-122.88zM495.66208 803.34848l-101.1712-157.05088 44.26752-31.616 67.45088 98.00704c-0.00512 0 23.17824 37.99552-10.5472 90.65984z m38.99392-276.10112v25.2928H408.19712C357.61152 876.06784 204.8 807.04512 204.8 807.04512c140.16512-109.86496 142.7968-254.50496 142.7968-254.50496H208.49152c0-57.9584 52.16256-56.91392 52.16256-56.91392h93.79328v-151.7568h-50.5856C284.89728 429.2352 204.8 425.02144 204.8 425.02144s32.67072-50.5856 54.79936-137.00096c22.12864-86.42048 89.5744-76.928 89.5744-76.928-20.0192 35.82976-29.50656 76.928-29.50656 76.928H485.12c40.04864 0 37.9392 25.2928 37.9392 25.2928v29.51168H411.35616v152.8064H503.04c33.72544 0 31.616 31.616 31.616 31.616zM819.2 747.49952h-102.22592l-88.51968 55.84896-8.42752-55.84896h-64.29184V288.01536H819.2v459.48416z" fill="#0066FF" p-id="3963"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/my-blog.github.io/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/my-blog.github.io/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>分类</span>
            </a>
        </li>
        
        
        <li >
            <a href='/my-blog.github.io/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/my-blog.github.io/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#提前了解字符集">提前了解字符集</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/my-blog.github.io/p/mysql-psot/">Mysql Psot</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Feb 24, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 2 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="mysql-版本">Mysql 版本
</h1><p>目前都是使用的8.0，了解一下8.0对于之前的旧版本的新特性</p>
<p>8.0版本默认字符集将由 latin1 改为 utf8mb4</p>
<p>参考链接：<a class="link" href="https://dev.mysql.com/blog-archive/the-mysql-8-0-0-milestone-release-is-available/"  target="_blank" rel="noopener"
    >The MySQL 8.0.0 Milestone Release is available</a></p>
<h1 id="储存引擎">储存引擎
</h1><p>MySQL 5.5 版本之后开始采用 InnoDB 为默认存储引擎，之前版本默认的存储引擎为 MyISAM</p>
<p>存储引擎操作的对象是表，存储引擎的功能是接收上层传下来的指令，然后对表中的数据进行读取或写入的操作</p>
<p>区别：</p>
<p>InnoDB 支持事务，MyISAM 不支持（InnoDB每个语句就是一个事务）</p>
<p>InnoDB支持表级锁、行级锁，默认为行级锁；而 MyISAM 仅支持表级</p>
<p>InnoDB 必须要有主键，MyISAM可以没有主键（InnoDB不建索引的话会隐藏的生成一个 6 byte 的 int 型的索引作为主键索引。）</p>
<p>InnoDB是聚集索引，MyISAM是非聚集索引（索引和数据文件是分离）（聚集索引查询数据速度快，使用较少的内存）</p>
<h1 id="查询语句生命周期">查询语句生命周期
</h1><p>1.sql通过网络通信协议，从客户端发磅到服务端。</p>
<p>2.服务端收到sql后，查询缓存是否有匹配结果，若存在缓存，则直接取出缓存中结果返回，</p>
<p>否则进行下一阶段。</p>
<p>3.服务端对sql进行解析、预处理，然后生成查询计划。</p>
<p>4.执行引擎根据优化器生成的查询计划，调用存储引擎的API接口，拿到查询结果，然后返回</p>
<p>给客户端，同是缓存查询结果，不过缓存查询结果需要手动配置才会生效。</p>
<h1 id="常用的数据类型">常用的数据类型
</h1><h2 id="提前了解字符集">提前了解字符集
</h2><p>Mysql常见字符集：</p>
<ul>
<li>utf8mb4
utf8字符集，使用1～4个字节表示字符。mb4就是most bytes 4的意思，专门用来兼容四字节的unicode，utf8mb4是utf8的超集,兼容性比价好，可能会耗费更多的存储空间</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="k">user</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;主键&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">CHARACTER</span><span class="w"> </span><span class="kt">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_unicode_ci</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="s1">&#39;姓名&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="o">`</span><span class="n">id_card</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">id_card</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">BTREE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="kp">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="kp">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">147492</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="kp">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>utf8 1～3字节</p>
</li>
<li>
<p>utf8mb3 等价于 utf8</p>
</li>
</ul>
<p>中文是占 3 个字节，其他数字、英文、符号占一个字节。emoji 符号占 4 个字节，一些较复杂的文字、繁体字也是 4 个字节</p>
<p>navicate 新建数据库需要置顶字符集和排序规则：</p>
<p>如果创建数据库时没有显式的指定字符集和比较规则，则该数据库默认用服务器的字符集和比较规则</p>
<p>测试服库默认字符集和排序规则：</p>
<p>utf8mb4</p>
<p>utf8mb4_0900_ai_ci</p>
<p>常见排序规则  utf8mb4_unicode_ci  ，utf8mb4_general_ci</p>
<p>常见字符集： utf8mb4，utf8</p>
<p>需要统一，建库的时候统一字符集和排序规则</p>
<p>如果创建表时没有显式的指定字符集和比较规则，则该表默认用数据库的字符集和比较规则</p>
<p>比较规则的作用通常体现比较字符串大小的表达式以及对某个字符串列进行排序中</p>
<p>回顾一下计算机储存单位：</p>
<p>1个bit 只能存 0或者1</p>
<p>8位(bit)=1字节(Byte)</p>
<p>1024字节=1KB</p>
<p>int</p>
<p>整数值，支持2147483648～2147483647（如果是UNSIGNED，</p>
<p>为0～4294967295）的数</p>
<p>tinyint</p>
<p>整数值， 128～127（如果为UNSIGNED，为0～255）的数值</p>
<p>char</p>
<p>1～255个字符的定长串。它的长度必须在创建时指定，否则MySQL</p>
<p>假定为CHAR(1)</p>
<p>varchar</p>
<p>长度可变，最多不超过255字符数。如果在创建时指定为VARCHAR(n)，</p>
<p>则可存储0到n个字符的变长串（其中n≤255）</p>
<p>utf-8 编码 中1个汉字1个字母 就是占用1个字符数（实测）</p>
<p>text</p>
<p>最大长度为64 K的变长文本 指针类型</p>
<p>DATE</p>
<p>表示1000-01-01～9999-12-31的日期，格式为</p>
<p>YYYY-MM-DD</p>
<p>TIME</p>
<p>格式为HH:MM:SS</p>
<p>datetime</p>
<p>DATE和TIME的组合</p>
<p>ENUM</p>
<p>接受最多64 K个串组成的一个预定义集合的某个串</p>
<p>decimal</p>
<p>精度可变的浮点值</p>
<p>varchar 和text 小数据量的查询和插入几乎性能一样</p>
<h1 id="索引索引类型特点">索引，索引类型，特点
</h1><p>B+树</p>
<p>最左 匹配原则</p>
<p>联合索引</p>
<p>联合索引有哪些好处？</p>
<p>(1) 减少开销。</p>
<p>建一个联合索引(tcol01, tcol02, tcol03)，相当于建立三个索引(tcol01)、(tcol01, tcol02)、(tcol01, tcol02, tcol03)的功能。每个索引都会占用写入开销和磁盘开销，对于大量数据的表，使用联合索引会大大的减少开销。</p>
<p>(2) 覆盖索引。</p>
<p>对联合索引(tcol01, tcol02, tcol03)，如果有如下的SQL，</p>
<p>(3) 效率高。</p>
<p>多列条件的查询下，索引列越多，通过索引筛选出的数据就越少。</p>
<h1 id="锁事务">锁，事务
</h1><p>事务功能就是让数据库操作符合现实世界中状态转换的规则,特性</p>
<p>原子性</p>
<p>隔离性</p>
<p>一致性</p>
<p>持久性</p>
<h1 id="探索">探索：
</h1><p>主从，日志，备份，迁移，恢复，分库分表</p>
<h1 id="讨论优化方案">讨论&amp;优化方案
</h1><p>禁止建立预留字段？这种在那个情况有没有用呢？</p>
<p>冷热数据分离，不会经常读取的数据拎出来？</p>
<p>代码中一些问题，尽量避免地一些问题，归纳总结</p>
<p>1.储存相同数据的列名和列类型必须一致</p>
<p>2.尽量减少 select *</p>
<p>3.尽量用数值代替字符串类型，字符串需要逐个对比每一个字符，数值只需要比较一次。增加储存开销和查询性能</p>
<p>4.varchar 代替char ,</p>
<p>5.避免使用EMUN 枚举类型，order by 效率低。</p>
<p>6.where 避免使用null ，也就是设计字段时默认值避免使用null ，is null ，is not null 优化器会放弃查询索引，使用null 查询也不直观</p>
<p>7.避免使用where !=  ,where &lt;&gt; 很可能会让索引时生效</p>
<p>8.优先使用inner join ，只保留两表完全匹配的结果集。</p>
<p>9.避免长事务，会进行加锁，影响相关业务</p>
<p>10.联合索引长度小的列放在左侧，最左特性</p>
<p>11.控制表的数据量，修改表结构，加索引，备份，恢复会出现问题</p>
<p>归档方案，分库分表</p>
<p>12.所有的表和字段都要有注释，</p>
<p>13.大表经常查询要确认好索引，可以拿出来讨论啊，排序，主要where 条件加索引</p>
<p>14.修改删除重要数据，要先备份</p>
<p>15.尽量把列的默认值定义为not NULL</p>
<p>16.伪删除设计？</p>
<p>17.索引不适合建立在大量重复的数据的字段上，例如性别，月份，不适合</p>
<h1 id="参考">参考：
</h1><p>MySQL 是怎样运行的：从根儿上理解 MySQL</p>
<p>MySQL 性能调优必知必会</p>
<p>《高性能MySQL 第3版》</p>
<p>《MySQL必知必会》</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="koala9527/my-hugo-blog"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2025 我的小站
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/my-blog.github.io/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
